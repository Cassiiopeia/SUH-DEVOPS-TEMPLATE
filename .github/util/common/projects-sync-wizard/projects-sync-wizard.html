<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Projects Sync Wizard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        }
        .code-block {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
        }
        .code-block code {
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-indicator:hover {
            transform: scale(1.05);
        }
        .label-item {
            transition: all 0.2s ease;
        }
        .label-item:hover {
            transform: translateX(4px);
        }
        /* Dependency Flow */
        .dependency-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            padding: 16px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 8px;
        }
        .dependency-item {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
            white-space: nowrap;
        }
        .dependency-arrow {
            color: #64748b;
            font-size: 18px;
        }
        /* Info Boxes */
        .info-box-blue {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        .info-box-green {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        .info-box-amber {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .info-box-purple {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
        }
        /* Section Number Badge */
        .section-badge {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    }
                }
            }
        }
    </script>
    <!-- 버전 정보 (version-sync.sh에 의해 자동 동기화) -->
    <script type="application/json" id="versionJson">
{
  "name": "GitHub Projects Sync Wizard",
  "version": "2.2.0",
  "description": "GitHub Projects Status와 Issue Label 간 양방향 동기화를 위한 Cloudflare Worker 설정 마법사",
  "lastUpdated": "2026-01-22",
  "changelog": [
    {
      "version": "2.2.0",
      "date": "2026-01-22",
      "changes": [
        "ZIP 다운로드 제거 → curl 원클릭 설치 명령어 생성 방식으로 변경",
        "setup.sh 원격 실행 스크립트 추가 (인자 파싱 지원)",
        "Step 1 섹션 순서 변경 (Projects 생성 가이드 → URL 입력)",
        "User 타입 저장소 URL 입력란 위치 변경 (URL 입력 바로 아래로)",
        "저장소 URL 예외처리 강화 (다양한 GitHub URL 형식 지원)"
      ]
    },
    {
      "version": "2.1.0",
      "date": "2026-01-21",
      "changes": [
        "Organization + User Projects 모두 지원",
        "URL의 /views/N 경로 자동 무시",
        "Step 1 UI 대폭 개선 (프로세스 흐름, 가이드라인 추가)",
        "GitHub Projects 생성 가이드 추가 (건너뛰기 옵션)",
        "Label-Status 매핑 가이드 추가",
        "동적 Webhook URL 생성 (Organization/Repository)",
        "User Projects용 저장소 URL 입력 섹션 추가"
      ]
    },
    {
      "version": "2.0.0",
      "date": "2026-01-21",
      "changes": [
        "4단계 간소화 (기존 7단계에서 변경)",
        "projects-sync-worker-setup.sh 원클릭 설치 스크립트 추가",
        "projects-sync-worker-setup.ps1 Windows PowerShell 스크립트 추가",
        "issue-label.yml 기본값 자동 파싱",
        "Worker 이름 충돌 시 재입력 기능",
        "config.json 설정 파일 자동 생성",
        "ZIP 다운로드에 설치 스크립트 포함"
      ]
    },
    {
      "version": "1.0.0",
      "date": "2026-01-21",
      "changes": [
        "초기 릴리즈"
      ]
    }
  ],
  "compatibility": {
    "node": ">=18.0.0",
    "wrangler": ">=3.0.0"
  },
  "repository": "https://github.com/Cassiiopeia/SUH-DEVOPS-TEMPLATE"
}

    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
    <!-- 헤더 -->
    <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 dark:text-white">GitHub Projects Sync Wizard</h1>
                        <p class="text-sm text-gray-500 dark:text-gray-400" id="versionDisplay">v2.0.0</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                        <svg class="w-5 h-5 text-gray-600 dark:text-gray-300 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                        </svg>
                        <svg class="w-5 h-5 text-gray-300 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                        </svg>
                    </button>
                    <button onclick="resetWizard()" class="px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors">
                        초기화
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Step Indicator -->
    <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between" id="stepIndicators">
                <!-- JavaScript로 동적 생성 -->
            </div>
        </div>
    </div>

    <!-- 메인 컨텐츠 -->
    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Step 1: 프로젝트 정보 입력 -->
        <section id="step1" class="step-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Step 1: 프로젝트 정보 입력</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-6">GitHub Projects와 Worker 설정 정보를 입력하세요.</p>

                <!-- 전체 프로세스 흐름 -->
                <div class="info-box-blue rounded-lg p-4 mb-6">
                    <p class="text-sm text-blue-700 dark:text-blue-300 mb-3 font-medium">전체 설정 프로세스</p>
                    <div class="dependency-flow">
                        <div class="dependency-item bg-blue-600 text-white">① Projects 설정</div>
                        <span class="dependency-arrow">→</span>
                        <div class="dependency-item bg-green-600 text-white">② Worker 배포</div>
                        <span class="dependency-arrow">→</span>
                        <div class="dependency-item bg-yellow-600 text-white">③ Webhook 설정</div>
                        <span class="dependency-arrow">→</span>
                        <div class="dependency-item bg-purple-600 text-white">④ 완료</div>
                    </div>
                    <p class="text-xs text-green-600 dark:text-green-400 text-center mt-3">
                        ✓ 처음 설정하는 분도 이 마법사를 따라하면 됩니다!
                    </p>
                </div>

                <!-- 섹션 A: GitHub Projects 생성 가이드 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-green-600">A</span>
                        GitHub Projects 생성 가이드
                    </h3>

                    <!-- 건너뛰기 체크박스 -->
                    <div class="bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-4 mb-4">
                        <label class="flex items-center gap-3 cursor-pointer">
                            <input type="checkbox" id="skipProjectsGuide" onchange="toggleProjectsGuide()"
                                class="w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500">
                            <span class="text-sm text-gray-700 dark:text-gray-300">이미 GitHub Projects를 생성했습니다 (가이드 건너뛰기)</span>
                        </label>
                    </div>

                    <!-- 가이드 내용 -->
                    <div id="projectsGuideContent">
                        <div class="info-box-amber rounded-lg p-4 mb-4">
                            <p class="text-sm text-amber-700 dark:text-amber-300 mb-3 font-medium">GitHub Projects 생성 방법</p>
                            <ol class="text-sm text-gray-700 dark:text-gray-300 list-decimal list-inside space-y-3">
                                <li>
                                    <a href="https://github.com/new/project" target="_blank"
                                        class="text-blue-600 dark:text-blue-400 hover:underline font-medium">GitHub Projects 생성 페이지</a>로 이동
                                </li>
                                <li>
                                    <span class="text-green-600 dark:text-green-400 font-bold">"Board"</span> 또는
                                    <span class="text-green-600 dark:text-green-400 font-bold">"Kanban"</span> 템플릿 선택
                                </li>
                                <li>
                                    프로젝트 이름 입력 후 <span class="text-green-600 dark:text-green-400 font-medium">"Create project"</span> 클릭
                                </li>
                            </ol>
                        </div>

                        <!-- Status 컬럼 기본값 안내 -->
                        <div class="info-box-green rounded-lg p-4">
                            <p class="text-sm text-green-700 dark:text-green-300 mb-2 font-medium">✓ Board/Kanban 템플릿의 기본 Status 컬럼</p>
                            <div class="flex flex-wrap gap-2 mt-3">
                                <span class="px-2 py-1 bg-gray-500 text-white rounded text-xs">No Status</span>
                                <span class="px-2 py-1 bg-gray-600 text-white rounded text-xs">Backlog</span>
                                <span class="px-2 py-1 bg-gray-600 text-white rounded text-xs">Ready</span>
                                <span class="px-2 py-1 bg-blue-600 text-white rounded text-xs">In progress</span>
                                <span class="px-2 py-1 bg-purple-600 text-white rounded text-xs">In review</span>
                                <span class="px-2 py-1 bg-green-600 text-white rounded text-xs">Done</span>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">
                                <strong>중요:</strong> 아래 Label 설정과 동일하게 Status 컬럼 이름을 맞춰주세요. (예: "작업 전", "작업 중" 등)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 섹션 B: GitHub Projects URL 입력 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-blue-600">B</span>
                        GitHub Projects URL
                    </h3>
                    <input type="text" id="projectUrl"
                        placeholder="https://github.com/orgs/ORG/projects/1 또는 https://github.com/users/USER/projects/1"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        oninput="parseProjectUrl()">

                    <!-- 지원 형식 안내 -->
                    <div class="mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">지원 형식:</p>
                        <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1 ml-2">
                            <li>• <strong>Organization:</strong> <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">github.com/orgs/{org}/projects/{number}</code></li>
                            <li>• <strong>User:</strong> <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">github.com/users/{user}/projects/{number}</code></li>
                            <li class="text-gray-400">※ /views/N 경로는 자동으로 무시됩니다</li>
                        </ul>
                    </div>

                    <!-- 파싱 결과 -->
                    <div id="parseResult" class="mt-4 hidden">
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">타입</label>
                                <span id="projectTypeBadge" class="px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400">-</span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Owner Name</label>
                                <input type="text" id="ownerName" readonly
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Project #</label>
                                <input type="text" id="projectNumber" readonly
                                    class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white text-sm">
                            </div>
                        </div>
                    </div>

                    <!-- User 타입일 때 저장소 URL 입력 (파싱 결과 바로 아래) -->
                    <div id="repositoryUrlInline" class="mt-4 hidden">
                        <div class="info-box-amber rounded-lg p-4 mb-3">
                            <p class="text-sm text-amber-700 dark:text-amber-300">
                                <strong>User Projects</strong>의 경우 Webhook은 저장소 단위로 설정해야 합니다.
                                Projects에 연결할 저장소 URL을 입력하세요.
                            </p>
                        </div>
                        <input type="text" id="repositoryUrl"
                            placeholder="https://github.com/username/repository"
                            class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            oninput="parseRepositoryUrl()">
                        <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">
                            예: https://github.com/Cassiiopeia/SUH-DEVOPS-TEMPLATE 또는 https://github.com/user/repo/tree/main/path
                        </p>
                    </div>

                    <!-- 하위 호환성용 숨겨진 필드 -->
                    <input type="hidden" id="orgName">
                </div>

                <!-- 섹션 C: Label-Status 매핑 가이드 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-purple-600">C</span>
                        Label-Status 매핑 가이드
                    </h3>

                    <div class="info-box-purple rounded-lg p-4">
                        <p class="text-sm text-purple-700 dark:text-purple-300 mb-3 font-medium">Projects Status와 Issue Label 매핑 규칙</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400 mb-4">
                            Projects Board에서 카드를 이동하면 해당 Status와 <strong>동일한 이름의 Label</strong>이 Issue에 자동 적용됩니다.
                        </p>

                        <!-- 매핑 테이블 -->
                        <div class="overflow-x-auto bg-white dark:bg-gray-800 rounded-lg">
                            <table class="w-full text-xs">
                                <thead>
                                    <tr class="border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50">
                                        <th class="py-2 px-3 text-left text-gray-700 dark:text-gray-300">Projects Status</th>
                                        <th class="py-2 px-3 text-center text-gray-500">→</th>
                                        <th class="py-2 px-3 text-left text-gray-700 dark:text-gray-300">Issue Label</th>
                                        <th class="py-2 px-3 text-left text-gray-700 dark:text-gray-300">설명</th>
                                    </tr>
                                </thead>
                                <tbody class="text-gray-600 dark:text-gray-400">
                                    <tr class="border-b border-gray-100 dark:border-gray-700/50">
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">작업 전</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded">작업 전</span></td>
                                        <td class="py-2 px-3 text-gray-500">작업 시작 전 준비 상태</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 dark:border-gray-700/50">
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">작업 중</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-teal-100 dark:bg-teal-900/50 text-teal-800 dark:text-teal-200 rounded">작업 중</span></td>
                                        <td class="py-2 px-3 text-gray-500">작업이 진행 중인 상태</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 dark:border-gray-700/50">
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">확인 대기</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 rounded">확인 대기</span></td>
                                        <td class="py-2 px-3 text-gray-500">담당자 확인 필요</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 dark:border-gray-700/50">
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">피드백</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded">피드백</span></td>
                                        <td class="py-2 px-3 text-gray-500">수정 필요</td>
                                    </tr>
                                    <tr class="border-b border-gray-100 dark:border-gray-700/50">
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">작업 완료</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-blue-500 text-white rounded">작업 완료</span></td>
                                        <td class="py-2 px-3 text-gray-500">작업 완료 상태</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-gray-200 dark:bg-gray-600 rounded text-gray-800 dark:text-gray-200">취소</span></td>
                                        <td class="py-2 px-3 text-center text-gray-400">=</td>
                                        <td class="py-2 px-3"><span class="px-2 py-0.5 bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-200 rounded">취소</span></td>
                                        <td class="py-2 px-3 text-gray-500">작업 취소됨</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded">
                            <p class="text-xs text-amber-800 dark:text-amber-200">
                                <strong>중요:</strong> Projects의 Status 컬럼 이름과 Issue Label 이름이 <strong>정확히 일치</strong>해야 합니다.
                                아래에서 Label을 수정하면 Projects의 Status 컬럼 이름도 동일하게 변경해주세요.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 섹션 D: Status Labels 설정 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-yellow-500">D</span>
                        Status Labels 설정
                        <span class="text-gray-500 font-normal text-sm">(issue-label.yml 기본값)</span>
                    </h3>
                    <div id="labelsContainer" class="space-y-2 mb-4">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                    <div class="flex gap-2">
                        <button onclick="addLabel()" class="flex items-center gap-2 px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Label 추가
                        </button>
                        <button onclick="resetLabels()" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 px-4 py-2">
                            기본값 복원
                        </button>
                    </div>
                </div>

                <!-- 섹션 E: Worker 설정 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-orange-500">E</span>
                        Worker 설정
                    </h3>

                    <!-- Worker 이름 -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Worker 이름
                            <span class="text-gray-500 font-normal">(Cloudflare Worker 이름)</span>
                        </label>
                        <input type="text" id="workerName" placeholder="github-projects-sync-worker" value="github-projects-sync-worker"
                            class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">
                            배포 시 이름이 충돌하면 스크립트에서 새 이름을 입력할 수 있습니다.
                        </p>
                    </div>

                    <!-- Webhook Secret -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Webhook Secret
                            <span class="text-gray-500 font-normal">(자동 생성)</span>
                        </label>
                        <div class="flex gap-2">
                            <input type="text" id="webhookSecret" readonly
                                class="flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm">
                            <button onclick="generateWebhookSecret()" class="px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                                재생성
                            </button>
                            <button onclick="copyToClipboard(document.getElementById('webhookSecret').value)" class="px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">
                                복사
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 설치 명령어 생성 -->
                <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                        <span class="section-badge bg-indigo-600">F</span>
                        설치 명령어
                    </h3>

                    <div class="info-box-green rounded-lg p-4 mb-4">
                        <div class="flex items-start gap-3">
                            <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                            <div>
                                <p class="text-green-800 dark:text-green-200 font-medium">원클릭 설치</p>
                                <p class="text-sm text-green-700 dark:text-green-300 mt-1">
                                    아래 명령어를 복사하여 터미널에서 실행하면 자동으로 Worker가 배포됩니다.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 생성된 명령어 -->
                    <div id="installCommandSection" class="hidden">
                        <div class="code-block relative">
                            <button onclick="copyInstallCommand()" class="absolute top-2 right-2 p-2 text-gray-400 hover:text-white rounded transition-colors" title="명령어 복사">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                            </button>
                            <code id="installCommandCode" class="text-sm whitespace-pre-wrap break-all"></code>
                        </div>
                        <p class="mt-3 text-xs text-gray-500 dark:text-gray-400">
                            ※ 스크립트가 자동으로: npm 설치 → Cloudflare 로그인 → Worker 배포 → Secrets 설정을 진행합니다.
                        </p>
                    </div>

                    <!-- 명령어 생성 버튼 -->
                    <button onclick="generateInstallCommand()" class="w-full py-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all flex items-center justify-center gap-2 text-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        설치 명령어 생성
                    </button>
                </div>
            </div>
        </section>

        <!-- Step 2: Worker 배포 -->
        <section id="step2" class="step-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Step 2: Worker 배포</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-6">Step 1에서 생성된 명령어를 터미널에서 실행하세요.</p>

                <!-- 간단한 안내 -->
                <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6">
                    <div class="flex items-start gap-3">
                        <svg class="w-6 h-6 text-green-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div>
                            <p class="text-green-800 dark:text-green-200 font-medium">복사 → 붙여넣기 → 엔터!</p>
                            <p class="text-sm text-green-700 dark:text-green-300 mt-1">
                                Step 1에서 생성된 curl 명령어를 터미널에 붙여넣기만 하면 자동으로 설치됩니다.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 실행 안내 -->
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium text-gray-900 dark:text-white mb-2">1. 터미널 열기</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            Mac: Terminal.app 또는 iTerm / Windows: PowerShell 또는 Git Bash
                        </p>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-900 dark:text-white mb-2">2. 명령어 붙여넣기</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                            Step 1 하단의 "설치 명령어"를 복사하여 터미널에 붙여넣고 Enter를 누르세요.
                        </p>
                        <div class="p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg text-sm text-gray-500 dark:text-gray-400">
                            <code>curl -fsSL https://raw.githubusercontent.com/... | bash -s -- ...</code>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-900 dark:text-white mb-2">3. 안내에 따라 진행</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            스크립트가 자동으로 설치를 진행하며, Cloudflare 로그인과 GitHub Token 입력을 요청합니다.
                        </p>
                    </div>
                </div>

                <!-- 스크립트 동작 설명 -->
                <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                    <h4 class="font-medium text-gray-900 dark:text-white mb-3">스크립트가 자동으로 처리하는 작업:</h4>
                    <ol class="list-decimal list-inside space-y-2 text-sm text-gray-600 dark:text-gray-400">
                        <li>설정 파일 자동 생성 (wrangler.toml, Worker 코드 등)</li>
                        <li>npm 의존성 설치 (SSL 오류 자동 대응)</li>
                        <li>Cloudflare 로그인 (브라우저 자동 오픈)</li>
                        <li>Worker 배포 (이름 충돌 시 재입력 가능)</li>
                        <li>GITHUB_TOKEN 입력 받기</li>
                        <li>WEBHOOK_SECRET 자동 설정</li>
                        <li>Worker URL 출력</li>
                    </ol>
                </div>

                <!-- Worker URL 입력 (선택) -->
                <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        배포된 Worker URL (선택)
                    </label>
                    <input type="text" id="workerUrl" placeholder="https://xxx.workers.dev (스크립트 완료 후 출력된 URL)"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
                        스크립트 완료 후 출력되는 Worker URL을 입력하면 다음 단계에서 자동으로 표시됩니다.
                    </p>
                </div>
            </div>
        </section>

        <!-- Step 3: GitHub Webhook 설정 -->
        <section id="step3" class="step-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Step 3: GitHub Webhook 설정</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-6">GitHub에서 Webhook을 설정하세요.</p>

                <!-- Webhook 타입 안내 -->
                <div class="info-box-blue rounded-lg p-4 mb-6">
                    <p class="text-sm font-medium text-blue-700 dark:text-blue-300" id="webhookTargetLabel">Webhook 설정</p>
                    <p class="text-xs text-blue-600 dark:text-blue-400 mt-1" id="webhookTargetDescription">Projects URL에 따라 Webhook 설정 위치가 결정됩니다.</p>
                </div>

                <!-- Webhook 설정 단계 -->
                <div class="space-y-4 mb-6">
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">1</div>
                        <div>
                            <h4 class="font-medium text-gray-900 dark:text-white">Webhooks 설정 페이지 이동</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                <a id="webhookSettingsLink" href="#" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline break-all">
                                    Step 1에서 Projects URL을 입력하세요
                                </a>
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">2</div>
                        <div>
                            <h4 class="font-medium text-gray-900 dark:text-white">"Add webhook" 클릭</h4>
                        </div>
                    </div>
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">3</div>
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-900 dark:text-white">Webhook 정보 입력</h4>
                            <div class="mt-3 space-y-3 text-sm">
                                <div class="flex items-center gap-2">
                                    <span class="text-gray-500 dark:text-gray-400 w-28 flex-shrink-0">Payload URL:</span>
                                    <code class="flex-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs overflow-x-auto" id="webhookPayloadUrl">Worker URL을 Step 2에서 입력하세요</code>
                                    <button onclick="copyToClipboard(document.getElementById('workerUrl').value || '입력 필요')" class="text-blue-600 dark:text-blue-400 hover:underline text-xs">복사</button>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-gray-500 dark:text-gray-400 w-28 flex-shrink-0">Content type:</span>
                                    <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">application/json</code>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-gray-500 dark:text-gray-400 w-28 flex-shrink-0">Secret:</span>
                                    <code class="flex-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs overflow-x-auto" id="webhookSecretDisplay">-</code>
                                    <button onclick="copyToClipboard(document.getElementById('webhookSecret').value)" class="text-blue-600 dark:text-blue-400 hover:underline text-xs">복사</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">4</div>
                        <div>
                            <h4 class="font-medium text-gray-900 dark:text-white">이벤트 선택</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                "Let me select individual events" 선택 → <strong class="text-blue-600 dark:text-blue-400">"Project v2 items"</strong>만 체크
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">5</div>
                        <div>
                            <h4 class="font-medium text-gray-900 dark:text-white">"Add webhook" 클릭하여 저장</h4>
                        </div>
                    </div>
                </div>

                <!-- 주의사항 -->
                <div class="bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <svg class="w-5 h-5 text-amber-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <div>
                            <p class="text-sm text-amber-800 dark:text-amber-200">
                                <strong>Secret 값 확인:</strong> GitHub Webhook의 Secret과 Cloudflare Worker의 WEBHOOK_SECRET이 동일해야 합니다.
                                config.json 파일에서 확인하거나 위 "복사" 버튼을 사용하세요.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 4: 완료 -->
        <section id="step4" class="step-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">설정 완료!</h2>
                    <p class="text-gray-600 dark:text-gray-400">GitHub Projects Sync가 설정되었습니다.</p>
                </div>

                <!-- 설정 요약 -->
                <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-6">
                    <h4 class="font-medium text-gray-900 dark:text-white mb-3">설정 요약</h4>
                    <dl class="grid grid-cols-2 gap-2 text-sm">
                        <dt class="text-gray-500 dark:text-gray-400">Organization:</dt>
                        <dd class="text-gray-900 dark:text-white font-mono" id="summaryOrg">-</dd>
                        <dt class="text-gray-500 dark:text-gray-400">Project Number:</dt>
                        <dd class="text-gray-900 dark:text-white font-mono" id="summaryProject">-</dd>
                        <dt class="text-gray-500 dark:text-gray-400">Worker 이름:</dt>
                        <dd class="text-gray-900 dark:text-white font-mono" id="summaryWorker">-</dd>
                        <dt class="text-gray-500 dark:text-gray-400">Status Labels:</dt>
                        <dd class="text-gray-900 dark:text-white font-mono text-xs" id="summaryLabels">-</dd>
                    </dl>
                </div>

                <!-- 테스트 안내 -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">테스트 방법</h3>
                    <ol class="list-decimal list-inside space-y-2 text-sm text-gray-600 dark:text-gray-400">
                        <li>GitHub Projects Board에서 Issue 카드를 다른 Status 컬럼으로 이동</li>
                        <li>Issue 페이지에서 Label이 자동으로 변경되는지 확인</li>
                        <li>문제 발생 시 Worker 로그 확인: <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">npx wrangler tail</code></li>
                    </ol>
                </div>

                <!-- 트러블슈팅 -->
                <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                    <h4 class="font-medium text-blue-800 dark:text-blue-200 mb-2">문제가 발생하면?</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-blue-700 dark:text-blue-300">
                        <li>GitHub Webhook → Recent Deliveries에서 전송 상태 확인</li>
                        <li>Webhook Secret이 Worker와 동일한지 확인</li>
                        <li>GITHUB_TOKEN 권한 확인 (repo, project)</li>
                        <li>Label 이름이 Projects Status 컬럼과 정확히 일치하는지 확인</li>
                    </ul>
                </div>

                <!-- 다시 시작 버튼 -->
                <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 text-center">
                    <button onclick="resetWizard()" class="px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors">
                        새 프로젝트 설정하기
                    </button>
                </div>
            </div>
        </section>

        <!-- 네비게이션 버튼 -->
        <div class="flex justify-between mt-6">
            <button id="prevBtn" onclick="prevStep()" class="px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors hidden">
                이전
            </button>
            <button id="nextBtn" onclick="nextStep()" class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium rounded-lg transition-all ml-auto">
                다음
            </button>
        </div>
    </main>

    <!-- Toast 알림 -->
    <div id="toast" class="fixed bottom-4 right-4 bg-gray-800 dark:bg-gray-700 text-white px-4 py-3 rounded-lg shadow-lg transform translate-y-full opacity-0 transition-all duration-300">
        <span id="toastMessage"></span>
    </div>

    <script src="projects-sync-wizard.js"></script>
</body>
</html>
